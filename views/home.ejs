<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="../styles/home-style.css">
        <link rel="stylesheet" href="../styles/navbar-style.css">
    </head>
    <body>
        <header>
        <nav class="navigation">
          <a href="home" class="brand-name">Watch zone</a>
            <button class="hamburger">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                viewBox="0 0 20 20"
                fill="white">
                <path
                  fillRule="evenodd"
                  d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 15a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z"
                  clipRule="evenodd"
                />
              </svg>
            </button>
            <div class="navigation-menu">
              <ul>
                <li>
                    Welcome, <span id="userName"></span>
                </li>
                <li>
                  <a href="orders">My Orders</a>
              </li>
                <li>
                  <a href="cart.html">
                    <img src="../images/shopping-cart.png" alt="Shopping-cart" height="24" width="24"/>
                  </a>
                  <span id="cart_count"></span>
                </li>
                <li>
                  <div onclick="logOut()">
                    <img src="../images/logout.png" alt="logout" height="24" width="24"/>
                  </div>
                </li>
              </ul>
            </div>
          </nav>
        </header>
        <main>
            <div class="tab__container">
                <a class="tab" href="/home?category=men" onclick="tabSwitcher('men')">
                  Men's
                </a>
                <a class="tab" onclick="tabSwitcher('woman')" href="/home?category=women">
                  Woman's
                </a>
                <a class="tab" onclick="tabSwitcher('featured')" href="/home?category=featured">
                  Featured
                </a>
              </div>

                <% for ( var i=0; i< products.length; i++) { %>
                <div id="mens" class="tab__body">
                    <div class="container">
                        <div class="watch__card">
                            <img src=<%= products[i].img%> alt="watch" height="250"/>
                            <h4><%= products[i].title%> <br><%= products[i].desc%><br><span>$<%= products[i].price%></span></h4>
                            <div class="quick__view"><a href="./quick-view.html">Quick view</a></div>
                        </div>
                    </div>

                <% } %>
      
                </div>
        </main>
        <script>
            window.addEventListener("load", (e) => {
                let i;
                let href = window.location.href.split('?')
                let index = 0;
                if(href.length > 1) {
                    let query = href[1].split('=');
                    if(query.length > 1) {
                        switch (query[1]) {
                            case "men":
                                index = 0;
                                break;
                            case "women":
                                index = 1;
                                break;
                            case "featured":
                                index = 2;
                                break;
                            default:
                                index = 0;
                                break;
                        }
                    }
                }
                const tablinks = document.getElementsByClassName("tab");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active__tab", "");
                }
                tablinks[index].className += " active__tab";
            })

            function tabSwitcher(tabName) {
              let i, tablinks = document.getElementsByClassName("tab");
              for (i = 0; i < tablinks.length; i++) {
                  tablinks[i].className = tablinks[i].className.replace(" active__tab", "");
              }
              event.currentTarget.className += " active__tab";
            }
          </script>
        </body>
</html>
